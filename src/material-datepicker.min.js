"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),dateToString=function(a,b,c){var d=b.getTime(),e=b.getMonth()+1,f=b.getYear()+1900,g=b.getDay(),h=b.getDate();return a=a.replace(/\{timestamp\}/g,d),a=a.replace(/\{DDDD\}/g,c.DDDD[g]),a=a.replace(/\{DDD\}/g,c.DDD[g]),a=a.replace(/\{D\}/g,c.D[g]),a=a.replace(/\{dd\}/g,("0"+h).slice(-2)),a=a.replace(/\{d\}/g,h),a=a.replace(/\{MMMM\}/g,c.MMMM[e-1]),a=a.replace(/\{MMM\}/g,c.MMM[e-1]),a=a.replace(/\{mm\}/g,("0"+e).slice(-2)),a=a.replace(/\{m\}/g,e),a=a.replace(/\{yyyy\}/g,("0"+f).slice(-4)),a=a.replace(/\{yy\}/g,("0"+f).slice(-2))},MaterialDatepicker=function(){function a(b,c){var d=this;_classCallCheck(this,a);var e={type:"date",lang:"en",orientation:"landscape",primaryColor:"rgba(0, 150, 136, 1)",theme:"light",buttons:!0,openOn:"click",closeAfterClick:!0,date:new Date,weekBegin:"sunday",outputFormat:{date:"{yyyy}/{mm}/{dd}",month:"{MMMM} {yyyy}"},topHeaderFormat:"{YYYY}",headerFormat:{date:"{DDD}, {MMM} {d}",month:"{MMM}"},sitePickerFormat:{date:"{MMMM} {yyyy}",month:"{yyyy}"},onLoad:"",onOpen:"",onNewDate:"",outputElement:""};this.settings=Object.assign(e,c),this.date=this.settings.date,"object"==typeof this.settings.topHeaderFormat&&(this.settings.topHeaderFormat=this.settings.topHeaderFormat[this.settings.type]),"object"==typeof this.settings.headerFormat&&(this.settings.headerFormat=this.settings.headerFormat[this.settings.type]),"object"==typeof this.settings.outputFormat&&(this.settings.outputFormat=this.settings.outputFormat[this.settings.type]),"object"==typeof this.settings.sitePickerFormat&&(this.settings.sitePickerFormat=this.settings.sitePickerFormat[this.settings.type]);var f=new XMLHttpRequest;f.open("GET","https://rawgit.com/FreddyFY/material-datepicker/datepicker/src/translations/"+this.settings.lang+".json",!0);f.addEventListener("readystatechange",function(){4==f.readyState&&(d.i18n=JSON.parse(f.responseText),g())}),f.send();var g=function(){return d.element=b,"string"==typeof d.element&&(d.element=document.querySelector(""+b),null==d.element)?void console.warn("Object is not defined"):("string"==typeof d.settings.outputElement&&""!=d.settings.outputElement&&(d.settings.outputElement=document.querySelector(""+d.settings.outputElement)),void d.define())}}return _createClass(a,[{key:"define",value:function(){var a=this;return this.createElement(),"direct"==this.settings.openOn?void this.open(this.settings.openOn):void this.element.addEventListener(this.settings.openOn,function(){a.open(a.settings.openOn)})}},{key:"createElement",value:function(a){var b=this;this.position=this.element.getBoundingClientRect(),this.picker=document.createElement("div"),this.picker.setAttribute("class","mp-"+this.settings.type+"picker mp-picker"),this.picker.setAttribute("data-theme",this.settings.theme),this.picker.setAttribute("data-orientation",this.settings.orientation),this.picker.style.top=this.position.top+this.position.height+10+"px",this.picker.style.left=this.position.left+"px";var c=document.createElement("div");c.setAttribute("class","mp-picker-info"),this.picker.appendChild(c);var d=document.createElement("div");d.setAttribute("class","mp-picker-picker"),this.picker.appendChild(d);var e=document.createElement("span");e.setAttribute("class","mp-info-first"),c.appendChild(e);var f=document.createElement("span");f.setAttribute("class","mp-info-second"),c.appendChild(f);var g=document.createElement("div");g.setAttribute("class","mp-picker-site"),d.appendChild(g);var h=document.createElement("a");h.setAttribute("class","mp-picker-site-before mp-picker-site-button"),g.appendChild(h),h.addEventListener("click",function(){b._siteChange(-1)});var i=document.createElement("span");i.setAttribute("class","mp-picker-site-this mp-animate"),g.appendChild(i);var j=document.createElement("a");j.setAttribute("class","mp-picker-site-next mp-picker-site-button"),g.appendChild(j),j.addEventListener("click",function(){b._siteChange(1)});var k=document.createElement("div");k.setAttribute("class","mp-picker-choose mp-animate"),d.appendChild(k);var l='\n      .mp-picker:not([data-theme="dark"]) .mp-picker-info {\n        background-color: '+this.settings.primaryColor+';\n      }\n\n      .mp-picker .mp-picker-choose [class*="mp-picker-click"].active,\n      .mp-picker[data-theme="dark"] .mp-picker-choose [class*="mp-picker-click"].active {\n        background-color: '+this.settings.primaryColor+';\n      }\n\n      .mp-picker .mp-picker-choose [class*="mp-picker-click"].today:not(.active),\n      .mp-picker[data-theme="dark"] .mp-picker-choose .mp-picker-choose [class*="mp-picker-click"].today:not(.active) {\n        color: '+this.settings.primaryColor+";\n      }\n    ",m=document.createElement("style");m.type="text/css",m.appendChild(document.createTextNode(l)),document.querySelector("head").appendChild(m),this._updatePicker()}},{key:"_updatePicker",value:function(){var a=this,b=this.picker.querySelector(".mp-picker-choose");if(b.innerHTML="","date"==this.settings.type){for(var c=42,d=7,e=0;d>e;e++){var f=e;"monday"==this.settings.weekBegin&&(f+=1,f>=d&&(f=0));var g=document.createElement("span");g.setAttribute("class","mp-picker-header mp-picker-header-day-"+e),g.innerHTML=this.i18n.D[f],b.appendChild(g)}var h=this.date;h.setDate(1),h.setMonth(h.getMonth()+1),h.setDate(0);var i=h;h=h.getDate(),i.setDate(1),i=i.getDay();for(var j=function(c,d){var e=document.createElement("a");e.setAttribute("class","mp-picker-choose-day");var f=c>=i;"monday"==a.settings.weekBegin&&(f=c+1>=i),f&&h>=d?(e.innerHTML=d,e.classList.add("mp-picker-click-"+d),d++):(e.innerHTML=" ",e.classList.add("mp-empty")),b.appendChild(e),e.addEventListener("click",function(b){if(!b.path[0].classList.contains("mp-empty")){var c=d-1,e=a.date;e.setDate(c),"direct"==a.settings.openOn?a.newDate(e):a.newDate(e,"close")}}),k=d},e=0,k=1;c>e;e++)j(e,k)}else if("month"==this.settings.type)for(var l=12,m=function(c){var d=document.createElement("a");d.setAttribute("class","mp-picker-click-"+c+" mp-picker-choose-month"),d.innerHTML=a.i18n.MMM[c],b.appendChild(d),d.addEventListener("click",function(){var b=c,d=a.date;d.setMonth(b),a.newDate(d,"close")})},e=0;l>e;e++)m(e);this.callbackOnLoad()}},{key:"_siteChange",value:function(a){var b=this,c={"-1":"left",1:"right"},d={"-1":"right",1:"left"};"date"==this.settings.type?this.date.setMonth(this.date.getMonth()+a):"month"==this.settings.type&&this.date.setYear(this.date.getYear()+1900+a),this.picker.querySelectorAll(".mp-animate")[0].classList.add("mp-animate-"+c[a]),this.picker.querySelectorAll(".mp-animate")[1].classList.add("mp-animate-"+c[a]),setTimeout(function(){b.picker.querySelectorAll(".mp-animate")[0].classList.remove("mp-animate-"+c[a]),b.picker.querySelectorAll(".mp-animate")[0].classList.add("mp-animate-"+d[a]),b.picker.querySelectorAll(".mp-animate")[1].classList.remove("mp-animate-"+c[a]),b.picker.querySelectorAll(".mp-animate")[1].classList.add("mp-animate-"+d[a]),b._updatePicker(),setTimeout(function(){b.picker.querySelectorAll(".mp-animate")[0].classList.remove("mp-animate-"+d[a]),b.picker.querySelectorAll(".mp-animate")[1].classList.remove("mp-animate-"+d[a]),b.newDate(b.date)},200)},200)}},{key:"open",value:function(a){if("direct"==a&&"DIV"==this.element.tagName)return this.element.appendChild(this.picker),this.newDate(null),void this.callbackOnOpen();document.body.appendChild(this.picker);var b=this.position.top+this.position.height+5,c=this.position.left,d=document.body.getBoundingClientRect(),e=this.picker.getBoundingClientRect();c+e.width+50>d.width&&(c=c-e.width-5),b+e.height+20>d.height&&(b=b-e.height-this.position.height-5),this.picker.style.top=b,this.picker.style.left=c,this.newDate(null),this.callbackOnOpen()}},{key:"close",value:function(){this.picker&&this.picker.parentNode&&this.picker.parentNode.removeChild(this.picker)}},{key:"newDate",value:function(a,b){var c=a||this.settings.date,d=(this.i18n,c.getYear()+1900+"");c.getMonth(),c.getDay(),c.getDate();this.picker.querySelector(".mp-info-first").innerHTML=d,this.picker.querySelector(".mp-info-second").innerHTML=dateToString(this.settings.headerFormat,c,this.i18n),this.picker.querySelector(".mp-picker-site-this").innerHTML=dateToString(this.settings.sitePickerFormat,c,this.i18n),null!=this.picker.querySelector('[class*="mp-picker-click"].active')&&this.picker.querySelector('[class*="mp-picker-click"].active').classList.remove("active");var e=void 0;"date"==this.settings.type?(e=(new Date).getYear()==c.getYear()&&(new Date).getMonth()==c.getMonth(),this.picker.querySelector(".mp-picker-click-"+1*c.getDate()).classList.add("active")):"month"==this.settings.type&&(e=(new Date).getYear()==c.getYear(),this.picker.querySelector(".mp-picker-click-"+1*c.getMonth()).classList.add("active")),e?this.picker.querySelector(".mp-picker-click-"+1*(new Date).getMonth()).classList.add("today"):null!=this.picker.querySelector(".mp-picker-click-"+1*(new Date).getMonth()+".today")&&this.picker.querySelector(".mp-picker-click-"+1*(new Date).getMonth()+".today").classList.remove("today"),c.setMilliseconds(0),c.setSeconds(0),c.setMinutes(0),c.setHours(0),this.date=c;var f=dateToString(this.settings.outputFormat,c,this.i18n);("INPUT"==this.element.tagName&&"text"==this.element.getAttribute("type")||"DIV"==this.element.tagName)&&(this.element.value=f),("SPAN"==this.settings.outputElement.tagName||"P"==this.settings.outputElement.tagName||"A"==this.settings.outputElement.tagName)&&(this.settings.outputElement.innerHTML=f),"close"==b&&(this.close(),this.callbackOnNewDate())}},{key:"callbackOnLoad",value:function(){"function"==typeof this.settings.onLoad&&this.settings.onLoad.call(this,this.date)}},{key:"callbackOnOpen",value:function(){"function"==typeof this.settings.onOpen&&this.settings.onOpen.call(this,this.date)}},{key:"callbackOnNewDate",value:function(){"function"==typeof this.settings.onNewDate&&this.settings.onNewDate.call(this,this.date)}}]),a}(),lang_en={M:["J","F","M","A","M","J","J","A","S","O","N","D"],MMM:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],D:["S","M","T","W","T","F","S"],DDD:["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],DDDD:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lang_de={M:["J","F","M","A","M","J","J","A","S","O","N","D"],MMM:["Jan","Feb","M&auml;r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],MMMM:["Januar","Februar","M&auml;rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],D:["S","M","D","M","D","F","S"],DDD:["So","Mo","Di","Mi","Do","Fr","Sa"],DDDD:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},lang_it={M:["G","F","M","A","M","G","L","A","St","O","N","D"],MMM:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Sett","Ott","Nov","Dic"],MMMM:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],D:["D","L","M","M","G","V","S"],DDD:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],DDDD:["Domenica","Lunedi","Martedi","Mercoledi","Giovedi","Venerdi","Sabato"]};